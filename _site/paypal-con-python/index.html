<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Paypal con Python &#8211; CarlosGuerrero.com</title>
<meta name="description" content="">
<meta name="keywords" content="">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.carlosguerrero.com/images/">
<meta name="twitter:title" content="Paypal con Python">
<meta name="twitter:description" content="Online Portfolio">
<meta name="twitter:creator" content="@guerrerocarlos">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Paypal con Python">
<meta property="og:description" content="Online Portfolio">
<meta property="og:url" content="http://www.carlosguerrero.com/paypal-con-python/">
<meta property="og:site_name" content="CarlosGuerrero.com">




<meta name="google-translate-customization" content="b1072e0d2a59cc7c-672210c737f027f3-g3942c2d533e9a856-13"></meta>
        

<link rel="canonical" href="http://www.carlosguerrero.com/paypal-con-python/">
<link href="http://www.carlosguerrero.com/feed.xml" type="application/atom+xml" rel="alternate" title="CarlosGuerrero.com Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Sans:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://www.carlosguerrero.com/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://www.carlosguerrero.com/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://www.carlosguerrero.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://www.carlosguerrero.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://www.carlosguerrero.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://www.carlosguerrero.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.carlosguerrero.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.carlosguerrero.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.carlosguerrero.com/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
	</div><!-- /.site-name -->
  <div class="top-navigation" style="font-size: 1.4em;">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://www.flickr.com/photos/guerrerocarlos/sets/" target="_blank">fotografía</a></li>
		        
				<li><a href="http://www.carlosguerrero.com/blender/" >3D</a></li>
		        
				<li><a href="http://www.carlosguerrero.com/viajes/" >viajes</a></li>
		        
				<li><a href="http://www.carlosguerrero.com/articulos/" >Artículos</a></li>
		        
				<li><a href="https://github.com/guerrerocarlos/Curriculum-vitae-LaTeX/tree/master/pdf" target="_blank">CV</a></li>
		        
            <!-- <li><i class="icon-feed"></i> <a href="http://www.carlosguerrero.com/feed.xml" title="Atom/RSS feed">RSS</a> -->
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->
<script type="text/javascript"> 
                    function googleTranslateElementInit() { 
                      new google.translate.TranslateElement({pageLanguage: 'es', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, multilanguagePage: true}, 'google_translate_element'); 
                      } 
              </script><script type="text/javascript" src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>






<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-side" style="margin-top:20px;">
    <!-- <a href="skype:gnuwarrior?call"><img src="http://mystatus.skype.com/balloon/gnuwarrior" style="margin-top:-34px;border: none;" width="150" height="60" alt="My status"></a> -->
<a href="/">
<img src="http://www.carlosguerrero.com/images/bio-photo.jpg" class="bio-photo" alt="Carlos Guerrero bio photo"></a>
<h3>Carlos Guerrero</h3>
<p>Desarrollador de Software interesado en el <b>diseño</b> y la <b>fotografía</b>.</p>
<a href="http://twitter.com/guerrerocarlos" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://facebook.com/carlos.alejandro.guerrero.mora" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="http://linkedin.com/in/gnuwarrior" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>

<a href="http://github.com/guerrerocarlos" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>


</a>
<p> <div id="google_translate_element"></div>
</p>

  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
        
      <h1 itemprop="name">Paypal con Python</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <p>Después de pasar muchos días e incluso semanas tratando de descifrar como hacer funcionar el pago con Paypal en sitios hechos con Python (Django en mi caso) examinando el código de repositorios como <a href="https://github.com/johnboxall/django-paypal">django-paypal</a> sin ningún éxito.</p>

<p>Finalmente logré realizarlo, pero tuve que crear mi propia función, basándome en lo que sale en la críptica documentación actual de Paypal:  </p>

<p>En el lado de Paypal debes modificar la siguiente configuración, entrar en “Preferencias del sitio Web”:</p>

<p><a href="http://blog.carlosguerrero.com/wp-content/uploads/2012/11/Entrar-Aqui.png"><img class="aligncenter" title="Entrar en Preferencias del sitio Web" src="http://blog.carlosguerrero.com/wp-content/uploads/2012/11/Entrar-Aqui-300x182.png" alt="" width="300" height="182" /></a></p>

<p>Y activar “Transferencia de datos de pago” para luego copiar el campo “Código personal de identidad” que servira para el mecanismo de pago que se va a implementar con Django.</p>

<p><a href="http://blog.carlosguerrero.com/wp-content/uploads/2012/11/Copiar-este-codigo1.png"><img class="aligncenter size-medium wp-image-531" title="Copiar este codigo" src="http://blog.carlosguerrero.com/wp-content/uploads/2012/11/Copiar-este-codigo1-300x158.png" alt="" width="300" height="158" /></a></p>

<p>Una vez guardada esta configuración en el sitio de Paypal. Se puede aprovechar para crear un botón de pago, en el cual se especifica cual será la URL a la que se debe devolver al usuario justo despues de que se logra el pago con Paypal, en “3: Customize advanced features” de la siguiente manera:</p>

<p><a href="http://blog.carlosguerrero.com/wp-content/uploads/2012/11/BotonNuevo1.png"><img class="aligncenter" title="BotonNuevo" src="http://blog.carlosguerrero.com/wp-content/uploads/2012/11/BotonNuevo1-300x234.png" alt="" width="300" height="234" /></a></p>

<p>Una vez se ha puesto el botón en la pagina web, al usarlo, se redirigirá al cliente a la URL que hayamos especificado para ese botón, por lo cual debemos tener esa URL especificada en nuestro urls.py y con una funcion correspondiente en la cual usaremos la funcion paypal_check de la siguiente manera:</p>

<blockquote>
  <p>success , info = paypal_check(request.GET[‘tx’],’<código personal="" de="" identidad="">&#8217;)  
if success:  
#Código donde se procesa el pago, recibiendo toda la información que paypal te da en la variable info</código></p>
</blockquote>

<p>Cuando Paypal te redirecciona, envia un campo GET con el nombre ‘tx’, con él y tu codigo personal de identidad, paypal_check realiza un request a paypal verificando si realmente es un pago que acaba de realizarse y fue exitoso. De ser así, se obtiene ‘SUCCESS’ y una serie de campos adicionales muy utiles:</p>

<p><strong>info</strong> contiene: {‘protection_eligibility’: ‘Ineligible’, ‘last_name’: ‘Guerrero’, ‘txn_id’: ’8YG081780W’, ‘store_id’: ”, ‘shipping_discount’: ’0.00′, ‘receiver_email’: ‘guerrerocarlos%40gmail.com’, ‘payment_status’: ‘Completed’, ‘payment_gross’: ’5.00′, ‘terminal_id’: ”, ‘tax’: ’0.00′, ‘residence_country’: ‘VE’, ‘payer_status’: ‘verified’, ‘txn_type’: ‘web_accept’, ‘pos_transaction_type’: ”, ‘handling_amount’: ’0.00′, ‘shipping_method’: ‘Default’, ‘payment_date’: ’19%3A44%3A48+Sep+09%2C+2012+PDT’, ‘first_name’: ‘Carlos’, ‘btn_id’: ’50793′, ‘item_name’: ’1+Month’, ‘charset’: ‘windows-1252′, ‘receipt_reference_number’: ”, ‘custom’: ”, ‘transaction_subject’: ’1+Month’, ‘item_number’: ’1M’, ‘receiver_id’: ‘YPQJZFV6U4U’, ‘business’: ‘guerrerocarlos%40gmail.com’, ‘payer_business_name’: ‘Other’, ‘payer_id’: ‘A6E56SJCUQ’, ‘discount’: ’0.00′, ‘num_offers’: ’0′, ‘payment_fee’: ’0.57′, ‘insurance_amount’: ’0.00′, ‘mc_fee’: ’0.57′, ‘mc_currency’: ‘USD’, ‘shipping’: ’0.00′, ‘payer_email’: ‘client%40carlosguerrero.com’, ‘payment_type’: ‘instant’, ‘mc_gross’: ’5.00′, ‘quantity’: ’1′}</p>

<p>Ya con eso se tiene toda la informacion necesaria para procesar el pago del cliente, guardar su correo, el monto de su pago e incluso darle de una vez el producto que compró, si es entregable por vía digital.</p>

<p>Espero les sirva, cualquier pregunta estoy a la orden <a href="http://twitter.com/guerrerocarlos">@guerrerocarlos</a></p>

<p> </p>


      <footer role="contentinfo">
        <div class="article-author-bottom">
          <!-- <a href="skype:gnuwarrior?call"><img src="http://mystatus.skype.com/balloon/gnuwarrior" style="margin-top:-34px;border: none;" width="150" height="60" alt="My status"></a> -->
<a href="/">
<img src="http://www.carlosguerrero.com/images/bio-photo.jpg" class="bio-photo" alt="Carlos Guerrero bio photo"></a>
<h3>Carlos Guerrero</h3>
<p>Desarrollador de Software interesado en el <b>diseño</b> y la <b>fotografía</b>.</p>
<a href="http://twitter.com/guerrerocarlos" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://facebook.com/carlos.alejandro.guerrero.mora" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="http://linkedin.com/in/gnuwarrior" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>

<a href="http://github.com/guerrerocarlos" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>


</a>
<p> <div id="google_translate_element"></div>
</p>

        </div>
      </footer>
    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>Probablemente también te interese<small class="pull-right">(<a href="http://www.carlosguerrero.com/articulos">Ver todos los artículos</a>)</small></h4>
    <ul>
    
      
      
        
      
      
    
      
      
        
      
      
    
      
      
        
      
      
    
    </ul>
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2014 Carlos Guerrero. Hecho en <a href="http://jekyllrb.com">Jekyll</a>. Código fuente disponible en <a href="http://github.com/guerrerocarlos/carlosguerrero.com">Github</a>.</span> <a href="http://www.carlosguerrero.com/feed.xml"> <i class="icon-feed"></i> </a> 

    
            <script type="text/javascript">
var jekyllMapping = (function () {
    'use strict';
    var settings;
    var obj = {
        plotArray: function(locations) {
            function jekyllMapListen (m, s) {
                if (s.link) {
                    google.maps.event.addListener(m, 'click', function() {
                        window.location.href = s.link;
                    });
                }
            }
            var bounds = new google.maps.LatLngBounds(), markers = [], s, l, m;
            while (locations.length > 0) {
                s = locations.pop();
                l = new google.maps.LatLng(s.latitude, s.longitude);
                m = new google.maps.Marker({
                    position: l,
                    map: this.map,
                    title: s.title
                });
                markers.push(m);
                bounds.extend(l);                
                jekyllMapListen(m, s);
            }
            this.map.fitBounds(bounds);
        },
        indexMap: function () {
            this.plotArray(settings.pages);
        },
        pageToMap: function () {
            if (typeof(settings.latitude) !== 'undefined' && typeof(settings.longitude) !== 'undefined') {
                this.options.center = new google.maps.LatLng(settings.latitude, settings.longitude);

                var mainMarker = new google.maps.Marker({
                    position: this.options.center,
                    map: this.map,
                    title: "Paypal con Python"
                });
                this.map.setCenter(this.options.center);
            }     

            if (settings.locations instanceof Array) {
                this.plotArray(settings.locations);
            }

            if (settings.kml) {
                var mainLayer = new google.maps.KmlLayer(settings.kml);
                mainLayer.setMap(this.map);
            }
            
            if (settings.layers) {
                var layers = [];
                while (settings.layers.length > 0){
                    var m = new google.maps.KmlLayer(settings.layers.pop());
                    layers.push(m);
                    m.setMap(this.map);
                }
            }
        },
        mappingInitialize: function () {
            this.options = {
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: new google.maps.LatLng(0, 0)
            };

            this.map = new google.maps.Map(document.getElementById("jekyll-mapping"), this.options);

            if (settings.pages) {
                this.indexMap();
            } else {
                this.pageToMap();
            }
        },
        loadScript: function (set) {
            settings = set;
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "http://maps.googleapis.com/maps/api/js?key=" + settings.api_key + "&sensor=false&callback=jekyllMapping.mappingInitialize";
            document.body.appendChild(script);
        }
    };
    return obj;
}());
</script> 
        
    



  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://www.carlosguerrero.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://www.carlosguerrero.com/assets/js/scripts.min.js"></script>
	        

</body>
</html>
